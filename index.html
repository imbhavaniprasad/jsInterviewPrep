<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="script.js" src="text/javascript"></script>
    <title>JS Interview Prep</title>
</head>
<body>
    <b>Check console</b>
    <script>
// test function
const testFunction = () => {
  let count = 0;
  
  return function(){
    count++;
    if(count < 4){
      throw "failed";
    }else{
      return "hello";
    }
  }
};


let t = testFunction();
let c = circuitBreaker(t, 3, 200);

c(); // "error"
c(); // "error"
c(); // "error"

// service is closed for 200 MS
c(); // "service unavailable" 
c(); // "service unavailable"
c(); // "service unavailable"
c(); // "service unavailable"
c(); // "service unavailable"
// service becomes available after 200ms
setTimeout(() => {console.log(c());}, 200); // "hello";
    </script>
</body>
</html>